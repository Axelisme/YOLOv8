<!DOCTYPE html>
<html>

<head>
    <title>Soid identificaion</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
        }

        .container {
            width: 100%;
            max-width: 800px;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #prediction-img {
            width: 100%;
            height: auto;
            max-height: 100%;
            object-fit: contain;
        }

        .prediction-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            font-weight: bold;
            color: red;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 5px;
            z-index: 2;
        }
    </style>
</head>

<body>
    <div class="container">
        <img id="prediction-img" src='http://norky:nkjs24672132@60.251.33.67:8010/video1s2.mjpg'
            alt="Waiting predicted Image...">
        <div id="prediction" class="prediction-overlay">Prediction: N/A</div>
    </div>

    <script>
        const predictionImg = document.getElementById('prediction-img');
        const predictionElement = document.getElementById('prediction');

        async function fetchPrediction() {
            const response = await fetch('/get_result');
            const reader = response.body.getReader();

            while (true) {
                const { done, value } = await reader.read();
                if (done) break;

                const result = JSON.parse(new TextDecoder().decode(value));
                predictionElement.textContent = `Prediction: ${result.prediction} (${(result.probability * 100).toFixed(2)}%)`;
            }
        }

        fetchPrediction();
    </script>
</body>

</html>